# 云服务器开服

本文介绍如何使用云服务器开设 Minecraft 服务器。

## 云服务器的优势

| 优势 | 说明 |
|------|------|
| 天然公网 IP | 无需申请，无需配置端口转发 |
| 稳定性高 | 专业机房，电力和网络有保障 |
| 带宽独享 | 不受家庭网络影响 |
| 24 小时运行 | 无需保持家用电脑开机 |
| 可扩展性 | 可以随时升级配置 |

---

## 国内云服务商

### 主流服务商对比

| 服务商 | 特点 | 适合场景 |
|--------|------|----------|
| 阿里云 | 市场份额最大，文档完善 | 各类场景 |
| 腾讯云 | 游戏行业经验丰富，有轻量应用服务器 | 游戏服务器 |
| 华为云 | 企业级服务，稳定性好 | 正式运营 |

### 轻量应用服务器 vs 云服务器

| 类型 | 价格 | 配置 | 适合场景 |
|------|------|------|----------|
| 轻量应用服务器 | 较低 | 固定套餐 | 小型服务器、测试 |
| 云服务器（ECS/CVM） | 较高 | 灵活配置 | 正式运营、大型服务器 |

对于 Minecraft 服务器，轻量应用服务器通常性价比更高。

---

## 海外云服务商

如果玩家主要在海外，或需要免备案，可以考虑海外云服务商：

| 服务商 | 特点 |
|--------|------|
| Vultr | 按小时计费，机房多，性价比高 |
| DigitalOcean | 简单易用，文档完善 |
| Linode | 稳定性好，老牌服务商 |
| AWS Lightsail | 亚马逊旗下，有亚太节点 |
| Azure | 微软旗下，有香港节点 |

**注意**：海外服务器访问国内可能存在延迟和丢包问题。

---

## 配置选择建议

### 最低配置要求

| 配置项 | 最低要求 | 说明 |
|--------|----------|------|
| CPU | 2 核 | 单核性能越高越好 |
| 内存 | 2 GB | 原版服务器最低要求 |
| 硬盘 | 40 GB SSD | 存储地图和插件 |
| 带宽 | 3 Mbps | 约支持 5-10 人同时在线 |

### 推荐配置

| 玩家规模 | CPU | 内存 | 带宽 |
|----------|-----|------|------|
| 1-10 人 | 2 核 | 4 GB | 5 Mbps |
| 10-30 人 | 4 核 | 8 GB | 10 Mbps |
| 30-50 人 | 4 核 | 16 GB | 20 Mbps |
| 50+ 人 | 8 核 | 32 GB | 30+ Mbps |

### 带宽计算

Minecraft 每个玩家大约需要 100-300 Kbps 带宽，但需要预留余量：

```
建议带宽 = 玩家数 × 0.5 Mbps
```

**注意**：国内云服务器带宽较贵，可以考虑按流量计费。

---

## 购买和配置流程

以下以阿里云轻量应用服务器为例。

### 第一步：购买服务器

1. 访问阿里云官网：https://www.aliyun.com
2. 选择「轻量应用服务器」
3. 选择配置：
   - 地域：选择离玩家最近的地域
   - 镜像：选择 Ubuntu 或 CentOS
   - 套餐：根据需求选择
4. 完成购买

### 第二步：连接服务器

**Windows 使用 PowerShell 或 PuTTY**：

```powershell
ssh root@服务器公网IP
```

**Linux/macOS**：

```bash
ssh root@服务器公网IP
```

首次连接需要输入密码（在控制台设置或重置）。

### 第三步：配置安全组

安全组是云服务器的防火墙，需要放行 Minecraft 端口。

1. 进入服务器控制台
2. 找到「安全组」或「防火墙」设置
3. 添加入站规则：

| 协议 | 端口 | 来源 | 说明 |
|------|------|------|------|
| TCP | 25565 | 0.0.0.0/0 | Java 版 |
| UDP | 19132 | 0.0.0.0/0 | 基岩版 |
| TCP | 22 | 你的 IP | SSH（建议限制来源） |

### 第四步：安装 Java 和服务端

参考服务端安装文档完成后续配置。

---

## 安全组配置详解

### 阿里云安全组

1. 登录阿里云控制台
2. 进入「云服务器 ECS」或「轻量应用服务器」
3. 选择实例 → 安全组 → 配置规则
4. 添加入方向规则：
   - 授权策略：允许
   - 协议类型：自定义 TCP
   - 端口范围：25565/25565
   - 授权对象：0.0.0.0/0

### 腾讯云安全组

1. 登录腾讯云控制台
2. 进入「云服务器」或「轻量应用服务器」
3. 选择实例 → 防火墙 → 添加规则
4. 配置：
   - 协议：TCP
   - 端口：25565
   - 策略：允许
   - 来源：所有 IPv4

### 华为云安全组

1. 登录华为云控制台
2. 进入「弹性云服务器」
3. 选择实例 → 安全组 → 配置规则
4. 添加入方向规则：
   - 协议端口：TCP: 25565
   - 源地址：0.0.0.0/0

---

## 备案相关

### 什么情况需要备案

| 情况 | 是否需要备案 |
|------|--------------|
| 使用 IP 地址直接访问 | 不需要 |
| 使用域名 + 非 80/443 端口 | 不需要 |
| 使用域名 + 80/443 端口 | 需要 |
| 搭建网站 | 需要 |

**Minecraft 服务器使用 25565 端口，通常不需要备案。**

### 备案流程简述

如果需要备案：

1. 在云服务商控制台提交备案申请
2. 准备材料：身份证、域名证书、服务器信息
3. 等待管局审核（约 7-20 个工作日）
4. 审核通过后在网站底部添加备案号

---

## 服务器系统选择

### Linux vs Windows

| 系统 | 优势 | 劣势 |
|------|------|------|
| Linux | 资源占用低、稳定、免费 | 需要命令行操作 |
| Windows | 图形界面、易上手 | 资源占用高、需要授权费 |

**推荐使用 Linux**，Minecraft 服务器在 Linux 上运行更稳定，资源占用更低。

### Linux 发行版选择

| 发行版 | 特点 | 推荐度 |
|--------|------|--------|
| Ubuntu | 社区活跃，文档丰富 | ⭐⭐⭐ |
| Debian | 稳定，资源占用低 | ⭐⭐⭐ |
| CentOS Stream | 企业级，稳定 | ⭐⭐ |
| Rocky Linux | CentOS 替代品 | ⭐⭐ |

---

## 成本优化

### 按量付费 vs 包年包月

| 计费方式 | 适合场景 |
|----------|----------|
| 按量付费 | 测试、临时使用 |
| 包年包月 | 长期运营 |

包年包月通常有较大折扣，长期使用更划算。

### 带宽优化

1. **按流量计费**：如果玩家不多，按流量计费可能更便宜
2. **使用 CDN**：对于网站资源可以使用 CDN 节省带宽
3. **压缩数据**：使用支持压缩的服务端（如 Paper）

### 学生优惠

各大云服务商都有学生优惠：
- 阿里云学生机
- 腾讯云学生服务器
- 华为云学生套餐

价格通常在 10-30 元/月。

---

## 常见问题

### 服务器卡顿

1. 检查 CPU 和内存使用率
2. 考虑升级配置
3. 优化服务端设置

### 无法连接

1. 检查安全组是否放行端口
2. 检查服务端是否正在运行
3. 检查服务端日志是否有错误

### 带宽不够用

1. 升级带宽
2. 改为按流量计费
3. 限制同时在线人数

---

## 下一步

- 完成服务端安装和配置
- 配置 [域名绑定](05-域名绑定与安全.md) 方便玩家连接
- 了解 [安全注意事项](05-域名绑定与安全.md#安全注意事项)
