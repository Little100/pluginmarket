# 公网开服 - 概述与前置知识

## 概述

公网开服是 Minecraft 服务器对外开放的最理想方式。相比内网穿透等方案，公网开服具有以下优势：

- **延迟最低**：数据直接传输，无需经过第三方服务器中转
- **稳定性最高**：不依赖第三方服务的可用性
- **带宽无限制**：完全取决于你的网络带宽，不受第三方限制
- **完全可控**：服务器的所有网络配置都由你掌控

本系列文档将介绍三种公网开服方式：

1. **IPv4 公网开服**：传统方式，兼容性最好，但公网 IPv4 资源稀缺
2. **IPv6 公网开服**：新一代方案，地址充足，但部分玩家网络不支持
3. **云服务器开服**：租用云服务商的服务器，天然具备公网 IP

---

## 前置知识

### 什么是公网 IP 和内网 IP

**公网 IP（Public IP）**：
- 在整个互联网上唯一的 IP 地址
- 可以被互联网上的任何设备直接访问
- 由运营商分配给用户

**内网 IP（Private IP）**：
- 仅在局域网内有效的 IP 地址
- 无法被互联网上的其他设备直接访问
- 常见的内网 IP 地址段：
  - `10.0.0.0` - `10.255.255.255`
  - `172.16.0.0` - `172.31.255.255`
  - `192.168.0.0` - `192.168.255.255`
  - `100.64.0.0` - `100.127.255.255`（运营商级 NAT）

### 如何判断自己是否有公网 IP

判断方法是对比路由器 WAN 口 IP 与外网查询到的 IP 是否一致。

**步骤 1：查看路由器 WAN 口 IP**

1. 登录路由器管理页面（通常是 `192.168.1.1` 或 `192.168.0.1`）
2. 在「网络状态」或「WAN 口设置」中查看获取到的 IP 地址

**步骤 2：查询外网 IP**

访问以下任意网站查询你的外网 IP：
- https://ip.sb
- https://ipinfo.io
- https://whatismyip.com

**判断结果**：

| 情况 | 说明 |
|------|------|
| WAN 口 IP = 外网 IP | 你有公网 IP |
| WAN 口 IP ≠ 外网 IP | 你没有公网 IP，处于运营商 NAT 之后 |
| WAN 口 IP 以 `100.64` 开头 | 运营商级 NAT（CGNAT），没有公网 IP |
| WAN 口 IP 以 `10.` 或 `172.` 开头 | 运营商内网，没有公网 IP |

### IPv4 与 IPv6

**IPv4**：
- 地址格式：`xxx.xxx.xxx.xxx`（如 `114.114.114.114`）
- 地址长度：32 位，约 43 亿个地址
- 现状：地址已经枯竭，大量用户共享公网 IP

**IPv6**：
- 地址格式：`xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx`（如 `2001:db8::1`）
- 地址长度：128 位，地址数量几乎无限
- 现状：正在普及，国内三大运营商已广泛部署

**对于 Minecraft 开服的影响**：

| 特性 | IPv4 | IPv6 |
|------|------|------|
| 公网 IP 获取难度 | 较难，需要向运营商申请 | 容易，通常默认分配 |
| 玩家兼容性 | 几乎所有玩家都支持 | 部分玩家网络不支持 |
| 端口转发 | 需要配置 | 通常不需要 |
| NAT 问题 | 存在 | 不存在 |

### NAT 的概念

**NAT（Network Address Translation，网络地址转换）** 是一种将内网 IP 地址转换为公网 IP 地址的技术。

**为什么需要 NAT**：
- IPv4 地址不够用
- 多个设备需要共享一个公网 IP 上网

**NAT 对开服的影响**：
- 外部设备无法主动连接到 NAT 后面的设备
- 需要配置「端口转发」才能让外部访问内网服务器

**NAT 的层级**：

```
互联网
   │
   ▼
运营商 NAT（如果存在）──── 第一层 NAT
   │
   ▼
光猫 NAT（如果光猫是路由模式）──── 第二层 NAT
   │
   ▼
路由器 NAT ──── 第三层 NAT
   │
   ▼
你的电脑/服务器
```

NAT 层级越多，开服配置越复杂。理想情况是只有一层 NAT（路由器），并且拥有公网 IP。

---

## 下一步

根据你的网络情况，选择合适的开服方式：

- 如果你有公网 IPv4 或可以申请到 → [IPv4 公网开服](02-IPv4公网开服.md)
- 如果你有 IPv6 → [IPv6 公网开服](03-IPv6公网开服.md)
- 如果你没有公网 IP 且不想使用内网穿透 → [云服务器开服](04-云服务器开服.md)
