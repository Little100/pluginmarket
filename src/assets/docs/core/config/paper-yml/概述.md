# Paper 配置文件概述

## 简介

Paper 是目前最流行的 Minecraft 服务端之一，提供了丰富的配置选项来优化服务器性能和自定义游戏行为。

本系列文档将详细介绍 Paper 的配置文件体系，帮助你理解和调整各项配置。

## 配置文件体系变化

Paper 的配置文件体系在 1.19 版本发生了重大变化：

### 旧版（1.18 及以前）

在 1.18 及更早版本中，Paper 使用单一的 `paper.yml` 文件存储所有配置：

```
服务器根目录/
└── paper.yml          # 所有 Paper 配置
```

### 新版（1.19+）

从 1.19 版本开始，Paper 将配置拆分为多个文件，存放在 `config/` 目录下：

```
服务器根目录/
└── config/
    ├── paper-global.yml           # 全局配置（影响整个服务器）
    ├── paper-world-defaults.yml   # 世界默认配置（所有世界的默认值）
    └── paper-world.yml            # 每个世界目录下可单独存在（覆盖默认值）
```

每个世界目录（如 `world/`、`world_nether/`、`world_the_end/`）下可以创建独立的 `paper-world.yml` 文件，用于覆盖该世界的特定配置。

## 配置优先级

对于世界相关的配置，优先级从高到低为：

1. 世界目录下的 `paper-world.yml`（如 `world/paper-world.yml`）
2. `config/paper-world-defaults.yml`
3. Paper 内置默认值

## 两个主要配置文件的区别

### paper-global.yml

`paper-global.yml` 包含影响**整个服务器**的全局配置，与具体世界无关。主要包括：

- **异步区块处理**：控制区块加载的线程数和并发设置
- **网络配置**：数据包限制、发送速率等
- **代理支持**：Velocity、BungeeCord 等代理服务器配置
- **性能监控**：Timings、Spark 等性能分析工具配置
- **控制台设置**：日志格式、颜色等
- **杂项设置**：各种全局开关和限制

### paper-world-defaults.yml

`paper-world-defaults.yml` 包含**世界级别**的配置，可以为每个世界单独设置。主要包括：

- **反作弊**：反矿透（anti-xray）等
- **区块设置**：区块生成、加载相关
- **实体设置**：生物生成、AI、消失范围等
- **环境设置**：天气、火焰蔓延等
- **漏斗优化**：漏斗性能相关配置
- **刷怪设置**：刷怪笼、刷怪上限等
- **杂项修复**：各种游戏机制的修复和调整

## 配置文件导航

本系列文档按主题分为以下几个部分：

| 文档 | 内容 |
|------|------|
| [全局设置](./全局设置.md) | paper-global.yml 中的基础全局配置 |
| [区块系统](./区块系统.md) | 区块加载、生成、异步处理相关配置 |
| [网络与数据包](./网络与数据包.md) | 网络限制、数据包处理、代理支持等 |
| [反矿透](./反矿透.md) | anti-xray 配置详解（engine-mode 1/2） |
| [实体优化](./实体优化.md) | 实体消失范围、保存限制、生成优化等 |
| [世界默认设置](./世界默认设置.md) | paper-world-defaults.yml 中的世界级配置 |

## 配置修改建议

1. **备份配置**：修改前先备份原配置文件
2. **逐步调整**：一次只修改少量配置，观察效果
3. **重启生效**：大部分配置需要重启服务器才能生效
4. **查看日志**：修改后注意查看服务器日志是否有错误
5. **性能监控**：使用 Timings 或 Spark 监控配置修改后的性能变化
