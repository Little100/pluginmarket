# Purpur.yml 世界设置

本文档介绍 `purpur.yml` 中 `world-settings` 节点的配置，这些配置可以针对不同世界进行个性化设置。

---

## 配置结构

`world-settings` 支持为不同世界设置不同的配置：

```yaml
world-settings:
  default:
    # 默认配置，适用于所有世界
    ...
  world:
    # 主世界特定配置
    ...
  world_nether:
    # 下界特定配置
    ...
  world_the_end:
    # 末地特定配置
    ...
```

如果某个世界没有特定配置，将使用 `default` 中的配置。

---

## 生成设置

### 生物生成

```yaml
world-settings:
  default:
    mobs:
      spawn-limits:
        monster: 70
        creature: 10
        ambient: 15
        axolotls: 5
        underground_water_creature: 5
        water_creature: 5
        water_ambient: 20
```

| 配置项 | 说明 |
|--------|------|
| monster | 怪物生成上限 |
| creature | 动物生成上限 |
| ambient | 环境生物生成上限 |
| axolotls | 美西螈生成上限 |
| underground_water_creature | 地下水生生物生成上限 |
| water_creature | 水生生物生成上限 |
| water_ambient | 水生环境生物生成上限 |

### 结构生成

```yaml
world-settings:
  default:
    ridable-in-water: false
```

---

## 区块设置

### 区块加载

```yaml
world-settings:
  default:
    chunks:
      no-tick-view-distance: -1
```

| 配置项 | 说明 |
|--------|------|
| no-tick-view-distance | 非刻区块视距（-1 表示使用默认值） |

---

## 村民设置

```yaml
world-settings:
  default:
    mobs:
      villager:
        rideable: false
        controllable: true
        rideable-in-water: true
        brain-ticks: 1
        use-brain-ticks-only-when-lagging: true
        follow-emerald-blocks: false
        can-be-leashed: false
        bypass-mob-griefing: false
        can-breed: true
        breeding-delay-ticks: 6000
        clerics-farm-warts: false
        cleric-wart-farmers-throw-warts-at-villagers: true
        spawn-iron-golem:
          radius: 0
          limit: 0
        lobotomize:
          enabled: false
          check-interval: 100
        minimum-demand: 0
        search-radius:
          acquire-poi: 48
          nearest-bed-sensor: 48
```

| 配置项 | 说明 |
|--------|------|
| brain-ticks | AI 思考频率 |
| use-brain-ticks-only-when-lagging | 仅在卡顿时使用 brain-ticks |
| follow-emerald-blocks | 是否跟随绿宝石块 |
| can-be-leashed | 是否可以被拴绳牵引 |
| can-breed | 是否可以繁殖 |
| clerics-farm-warts | 牧师是否种植地狱疣 |
| lobotomize.enabled | 是否启用简化 AI |
| minimum-demand | 最小需求值 |
| search-radius.* | 搜索半径设置 |

**性能优化**：
- `lobotomize.enabled: true` 可以简化村民 AI，提升性能
- 减小 `search-radius` 值可以减少村民的搜索范围，提升性能

---

## 传送门设置

### 下界传送门

```yaml
world-settings:
  default:
    portal:
      nether:
        create-radius: 16
        search-radius: 128
        search-vanilla-portal-radius: 128
```

| 配置项 | 说明 |
|--------|------|
| create-radius | 创建传送门的搜索半径 |
| search-radius | 搜索现有传送门的半径 |
| search-vanilla-portal-radius | 搜索原版传送门的半径 |

### 末地传送门

```yaml
world-settings:
  default:
    portal:
      end:
        create-radius: 16
        search-radius: 128
```

---

## 掉落物设置

```yaml
world-settings:
  default:
    item:
      despawn-rate:
        default: 6000
        cobblestone: 300
        netherrack: 300
        sand: 300
        gravel: 300
```

| 配置项 | 说明 |
|--------|------|
| default | 默认消失时间（游戏刻） |
| cobblestone | 圆石消失时间 |
| netherrack | 下界岩消失时间 |
| sand | 沙子消失时间 |
| gravel | 沙砾消失时间 |

**性能优化**：减少常见方块的消失时间可以减少地面上的实体数量，提升性能。

---

## 生物 AI 设置

### 通用 AI 设置

```yaml
world-settings:
  default:
    mobs:
      zombie:
        aggressive-towards-villager-when-lagging: true
```

| 配置项 | 说明 |
|--------|------|
| aggressive-towards-villager-when-lagging | 服务器卡顿时是否仍对村民有敌意 |

### 生物寻路

```yaml
world-settings:
  default:
    mobs:
      pathfinding:
        max-visitors: 600
```

| 配置项 | 说明 |
|--------|------|
| max-visitors | 最大寻路访问者数量 |

---

## 世界边界设置

```yaml
world-settings:
  default:
    world-border:
      allow-player-teleport-outside: false
```

| 配置项 | 说明 |
|--------|------|
| allow-player-teleport-outside | 是否允许玩家传送到世界边界外 |

---

## 爆炸设置

```yaml
world-settings:
  default:
    explosion:
      regenerate:
        tnt: false
        creeper: false
        other: false
```

| 配置项 | 说明 |
|--------|------|
| regenerate.tnt | TNT 爆炸后是否自动恢复 |
| regenerate.creeper | 苦力怕爆炸后是否自动恢复 |
| regenerate.other | 其他爆炸后是否自动恢复 |

---

## 天气设置

```yaml
world-settings:
  default:
    weather:
      thunder:
        interval:
          min: 12000
          max: 180000
      rain:
        interval:
          min: 12000
          max: 24000
```

| 配置项 | 说明 |
|--------|------|
| thunder.interval.* | 雷暴间隔范围 |
| rain.interval.* | 下雨间隔范围 |

---

## 特定世界配置示例

### 示例：为主世界设置特定配置

```yaml
world-settings:
  default:
    mobs:
      spawn-limits:
        monster: 70
  world:
    mobs:
      spawn-limits:
        monster: 50  # 主世界怪物更少
```

### 示例：为资源世界设置配置

```yaml
world-settings:
  resource_world:
    mobs:
      spawn-limits:
        monster: 100  # 资源世界怪物更多
    explosion:
      regenerate:
        tnt: true     # TNT 爆炸自动恢复
        creeper: true # 苦力怕爆炸自动恢复
```

---

## 注意事项

:::tip 提示
- `default` 配置适用于所有未单独配置的世界
- 世界名称必须与服务器中的世界文件夹名称完全匹配
- 可以为每个世界设置完全不同的配置
:::

:::warning 注意
- 修改世界设置可能需要重启服务器
- 某些设置可能影响世界生成
- 建议在修改前备份世界数据
:::

---

## 相关文档

- [生物行为配置](./生物行为.md) - 详细的生物配置说明
- [方块与物品配置](./方块与物品.md) - 方块和物品相关配置
- [游戏机制配置](./游戏机制.md) - 游戏机制相关配置
