# Purpur.yml 游戏机制配置

本文档介绍 `purpur.yml` 中与游戏机制相关的配置选项，包括经验、附魔、合成等。

---

## 经验系统

### 经验修复附魔

```yaml
world-settings:
  default:
    gameplay-mechanics:
      mending-multiplier: 1.0
```

| 配置项 | 说明 |
|--------|------|
| mending-multiplier | 经验修补附魔的修复倍率 |

增加此值可以让经验修补更有效率，减少此值则相反。

### 经验获取

```yaml
world-settings:
  default:
    gameplay-mechanics:
      player:
        exp-dropped-on-death:
          equation: "expLevel * 7"
          maximum: 100
```

| 配置项 | 说明 |
|--------|------|
| equation | 死亡时掉落经验的计算公式 |
| maximum | 最大掉落经验值 |

**可用变量**：
- `expLevel` - 玩家等级
- `expTotal` - 玩家总经验值

---

## 附魔系统

### 附魔等级上限

```yaml
world-settings:
  default:
    gameplay-mechanics:
      enchantment-level-cap: 255
```

| 配置项 | 说明 |
|--------|------|
| enchantment-level-cap | 附魔等级上限 |

此选项允许你设置附魔的最大等级。默认值 255 是 Minecraft 的技术上限。

### 无限附魔

```yaml
world-settings:
  default:
    gameplay-mechanics:
      infinity-bow:
        normal-arrows: true
        spectral-arrows: false
        tipped-arrows: false
        works-without-arrows: false
```

| 配置项 | 说明 |
|--------|------|
| normal-arrows | 无限附魔是否对普通箭有效 |
| spectral-arrows | 无限附魔是否对光灵箭有效 |
| tipped-arrows | 无限附魔是否对药水箭有效 |
| works-without-arrows | 无限附魔是否可以在没有箭的情况下工作 |

### 附魔兼容性

```yaml
world-settings:
  default:
    gameplay-mechanics:
      allow-infinity-and-mending-together: false
```

| 配置项 | 说明 |
|--------|------|
| allow-infinity-and-mending-together | 是否允许无限和经验修补同时存在 |

启用后，弓可以同时拥有无限和经验修补附魔。

---

## 合成系统

### 合成配方修改

```yaml
world-settings:
  default:
    gameplay-mechanics:
      use-better-mending: false
```

| 配置项 | 说明 |
|--------|------|
| use-better-mending | 使用改进的经验修补机制 |

### 铁砧相关

```yaml
world-settings:
  default:
    gameplay-mechanics:
      anvil:
        allow-colors: false
        allow-irons-in-name: false
        max-repair-cost: 39
        cumulative-cost: true
```

| 配置项 | 说明 |
|--------|------|
| allow-colors | 是否允许在物品名称中使用颜色代码 |
| allow-irons-in-name | 是否允许在名称中使用特殊字符 |
| max-repair-cost | 最大修复成本 |
| cumulative-cost | 是否累计修复成本 |

**实用场景**：设置 `cumulative-cost: false` 可以防止物品因多次修复而变得"太贵"。

---

## 玩家机制

### 睡眠设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      player:
        sleep:
          bed-search-radius: 1
          ignore-nearby-mobs: false
```

| 配置项 | 说明 |
|--------|------|
| bed-search-radius | 床搜索半径 |
| ignore-nearby-mobs | 是否忽略附近的怪物 |

### 饥饿系统

```yaml
world-settings:
  default:
    gameplay-mechanics:
      player:
        hunger:
          starvation-damage: 1.0
```

| 配置项 | 说明 |
|--------|------|
| starvation-damage | 饥饿伤害值 |

### 重生设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      player:
        spawn:
          forced-respawn-location:
            enabled: false
            x: 0.0
            y: 64.0
            z: 0.0
            pitch: 0.0
            yaw: 0.0
```

| 配置项 | 说明 |
|--------|------|
| enabled | 是否启用强制重生点 |
| x, y, z | 重生坐标 |
| pitch, yaw | 重生朝向 |

### 传送设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      player:
        teleport:
          delay: 0
```

| 配置项 | 说明 |
|--------|------|
| delay | 传送延迟（游戏刻） |

### AFK 设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      player:
        afk:
          kick-if-idle: false
          kick-if-idle-time: 0
          broadcast-away: true
          broadcast-back: true
          tab-list-prefix: "[AFK] "
          tab-list-suffix: ""
```

| 配置项 | 说明 |
|--------|------|
| kick-if-idle | 是否踢出 AFK 玩家 |
| kick-if-idle-time | AFK 多久后踢出（游戏刻） |
| broadcast-away | 是否广播进入 AFK 状态 |
| broadcast-back | 是否广播退出 AFK 状态 |
| tab-list-prefix | Tab 列表前缀 |
| tab-list-suffix | Tab 列表后缀 |

---

## 战斗机制

### 伤害设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      player:
        damage:
          allow-void-damage: true
```

| 配置项 | 说明 |
|--------|------|
| allow-void-damage | 是否允许虚空伤害 |

### 盾牌设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      shield:
        damage-reduction: 0.0
        cooldown: 100
```

| 配置项 | 说明 |
|--------|------|
| damage-reduction | 伤害减免 |
| cooldown | 冷却时间（游戏刻） |

### 弓箭设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      arrow:
        movement-resets-despawn-counter: true
```

| 配置项 | 说明 |
|--------|------|
| movement-resets-despawn-counter | 移动是否重置消失计时器 |

---

## 掉落物机制

### 掉落物设置

```yaml
world-settings:
  default:
    gameplay-mechanics:
      item:
        shears:
          damage-if-sprinting: false
          sprinting-damage: 1
```

| 配置项 | 说明 |
|--------|------|
| damage-if-sprinting | 疾跑时剪刀是否造成伤害 |
| sprinting-damage | 疾跑伤害值 |

---

## 船只机制

```yaml
world-settings:
  default:
    gameplay-mechanics:
      boat:
        eject-players-on-land: false
        do-fall-damage: true
```

| 配置项 | 说明 |
|--------|------|
| eject-players-on-land | 在陆地上是否弹出玩家 |
| do-fall-damage | 是否造成摔落伤害 |

---

## 矿车机制

```yaml
world-settings:
  default:
    gameplay-mechanics:
      minecart:
        max-speed: 0.4
        place-anywhere: false
        powered-rail:
          boost-modifier: 0.06
```

| 配置项 | 说明 |
|--------|------|
| max-speed | 最大速度 |
| place-anywhere | 是否可以在任何地方放置 |
| powered-rail.boost-modifier | 动力铁轨加速修正 |

---

## 钓鱼机制

```yaml
world-settings:
  default:
    gameplay-mechanics:
      fishing-time-range:
        minimum: 100
        maximum: 600
```

| 配置项 | 说明 |
|--------|------|
| minimum | 最短钓鱼时间（游戏刻） |
| maximum | 最长钓鱼时间（游戏刻） |

---

## 其他机制

### 日夜循环

```yaml
world-settings:
  default:
    gameplay-mechanics:
      daylight-cycle-ticks:
        daytime: 12000
        nighttime: 12000
```

| 配置项 | 说明 |
|--------|------|
| daytime | 白天持续时间（游戏刻） |
| nighttime | 夜晚持续时间（游戏刻） |

### 火焰蔓延

```yaml
world-settings:
  default:
    gameplay-mechanics:
      fire:
        max-spread-radius: 5
```

| 配置项 | 说明 |
|--------|------|
| max-spread-radius | 最大蔓延半径 |

### 实体碰撞

```yaml
world-settings:
  default:
    gameplay-mechanics:
      entity:
        collision:
          only-players-collide: false
          allow-vehicle-collisions: true
```

| 配置项 | 说明 |
|--------|------|
| only-players-collide | 是否只有玩家可以碰撞 |
| allow-vehicle-collisions | 是否允许载具碰撞 |

---

## 注意事项

:::tip 提示
- 游戏机制配置位于 `world-settings.*.gameplay-mechanics` 下
- 可以为不同世界设置不同的游戏机制
- 某些配置可能需要重启服务器才能生效
:::

:::warning 注意
- 修改游戏机制可能显著影响游戏平衡
- 建议在测试服务器上先验证配置
- 某些配置可能与插件产生冲突
:::
