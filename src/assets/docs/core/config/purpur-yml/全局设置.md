# Purpur.yml 全局设置

`settings` 部分包含全局服务器设置，影响整个服务器的行为。

---

## 末地水放置

### allow-water-placement-in-the-end

```yaml
settings:
  allow-water-placement-in-the-end: true
```

| 配置项 | 说明 |
|--------|------|
| 类型 | 布尔值 |
| 默认值 | `true` |
| 作用 | 是否允许在末地放置水 |

原版 Minecraft 中，末地无法放置水（水桶会直接消失）。启用此选项后，玩家可以在末地正常使用水桶。

---

## 网络优化

### dont-send-useless-entity-packets

```yaml
settings:
  dont-send-useless-entity-packets: true
```

| 配置项 | 说明 |
|--------|------|
| 类型 | 布尔值 |
| 默认值 | `true` |
| 作用 | 不发送无用的实体数据包 |

启用后，服务器不会向客户端发送不必要的实体更新数据包，可以减少网络带宽占用，提升性能。

### use-alternate-keepalive

```yaml
settings:
  use-alternate-keepalive: true
```

| 配置项 | 说明 |
|--------|------|
| 类型 | 布尔值 |
| 默认值 | `true` |
| 作用 | 使用替代的心跳检测机制 |

启用后，服务器会使用更宽松的心跳检测机制。这对于网络不稳定的玩家非常有帮助，可以减少因网络波动导致的误踢。

**工作原理**：
- 原版机制：发送心跳包后等待固定时间，超时则踢出
- 替代机制：发送多个心跳包，只要收到任意一个响应就认为连接正常

---

## 日志设置

### logger 配置组

```yaml
settings:
  logger:
    suppress-init-legacy-material-errors: false
    suppress-ignored-advancement-warnings: false
    suppress-unrecognized-recipe-errors: false
    suppress-setblock-in-far-chunk-errors: false
    suppress-library-loader: false
```

| 配置项 | 说明 |
|--------|------|
| suppress-init-legacy-material-errors | 抑制旧版材料初始化错误日志 |
| suppress-ignored-advancement-warnings | 抑制被忽略的进度警告 |
| suppress-unrecognized-recipe-errors | 抑制无法识别的配方错误 |
| suppress-setblock-in-far-chunk-errors | 抑制在远处区块设置方块的错误 |
| suppress-library-loader | 抑制库加载器日志 |

这些选项用于控制服务器日志的详细程度。如果你的日志中充满了某类警告信息，可以选择性地抑制它们。

:::warning 注意
抑制错误日志可能会隐藏潜在问题，建议只在确认这些错误无害后才启用抑制。
:::

---

## 种子设置

### seed 配置组

```yaml
settings:
  seed:
    structure:
      buried_treasure: -1
      mineshaft: -1
```

| 配置项 | 说明 |
|--------|------|
| buried_treasure | 埋藏的宝藏结构种子 |
| mineshaft | 废弃矿井结构种子 |

设置为 `-1` 表示使用世界种子。你可以设置特定数值来固定这些结构的生成位置，这在某些特殊场景下可能有用。

---

## 网络设置

### network 配置组

```yaml
settings:
  network:
    upnp-port-forwarding: false
    max-joins-per-tick: 5
```

| 配置项 | 说明 |
|--------|------|
| upnp-port-forwarding | 是否启用 UPnP 自动端口转发 |
| max-joins-per-tick | 每 tick 最大允许加入的玩家数 |

**upnp-port-forwarding**：
- 启用后，服务器会尝试通过 UPnP 协议自动在路由器上开放端口
- 适合家庭网络环境，无需手动配置端口转发
- 需要路由器支持 UPnP

**max-joins-per-tick**：
- 限制每个游戏刻内可以完成加入的玩家数量
- 防止大量玩家同时加入导致服务器卡顿
- 默认值 `5` 适合大多数服务器

---

## 拉杆设置

### lagging-threshold

```yaml
settings:
  lagging-threshold: 19.0
```

| 配置项 | 说明 |
|--------|------|
| 类型 | 浮点数 |
| 默认值 | `19.0` |
| 作用 | TPS 低于此值时认为服务器卡顿 |

当服务器 TPS 低于此阈值时，某些功能可能会自动降级以减轻服务器负担。

---

## 命令相关

### command 配置组

```yaml
settings:
  command:
    gamemode:
      requires-specific-permission: false
```

| 配置项 | 说明 |
|--------|------|
| requires-specific-permission | 游戏模式命令是否需要特定权限 |

启用后，玩家需要拥有特定的权限节点才能切换到对应的游戏模式：
- `minecraft.command.gamemode.survival`
- `minecraft.command.gamemode.creative`
- `minecraft.command.gamemode.adventure`
- `minecraft.command.gamemode.spectator`

---

## 方块相关全局设置

### blocks 配置组

```yaml
settings:
  blocks:
    barrel:
      six-rows: false
    crying_obsidian:
      valid-for-portal-frame: false
    ender_chest:
      six-rows: false
    disable-mushroom-block-spread: false
    disable-note-block-updates: false
    disable-chorus-plant-updates: false
```

| 配置项 | 说明 |
|--------|------|
| barrel.six-rows | 木桶是否有 6 行存储空间（54 格，与大箱子相同） |
| crying_obsidian.valid-for-portal-frame | 哭泣的黑曜石是否可以用于建造下界传送门框架 |
| ender_chest.six-rows | 末影箱是否有 6 行存储空间 |
| disable-mushroom-block-spread | 禁用蘑菇方块蔓延 |
| disable-note-block-updates | 禁用音符盒更新 |
| disable-chorus-plant-updates | 禁用紫颂植物更新 |

**实用场景**：
- `six-rows` 选项可以让木桶和末影箱拥有更大的存储空间
- `crying_obsidian.valid-for-portal-frame` 可以让哭泣的黑曜石也能建造传送门

---

## 广播相关

### broadcast-advancement-enabled

```yaml
settings:
  broadcast-advancement-enabled: true
```

| 配置项 | 说明 |
|--------|------|
| 类型 | 布尔值 |
| 默认值 | `true` |
| 作用 | 是否广播玩家获得成就的消息 |

禁用后，玩家获得成就时不会在聊天栏显示全服广播消息。

---

## 书本限制

### book-size 配置组

```yaml
settings:
  book-size:
    page-max: 2560
    total-multiplier: 0.98
```

| 配置项 | 说明 |
|--------|------|
| page-max | 每页最大字符数 |
| total-multiplier | 总大小乘数 |

这些设置用于限制书本的大小，防止玩家创建过大的书本导致服务器问题。
