# spigot.yml 配置详解 - 世界设置

本文档介绍 spigot.yml 中 `world-settings` 节点的配置选项，包括实体激活范围、物品合并、视距等世界级别的设置。

## world-settings 概述

`world-settings` 节点包含针对特定世界的配置。你可以为不同的世界设置不同的参数，也可以使用 `default` 作为所有世界的默认配置。

```yaml
world-settings:
  default:
    # 默认配置，适用于所有未单独配置的世界
    verbose: false
    view-distance: default
    simulation-distance: default
    # ... 其他配置
  world_nether:
    # 针对下界的特定配置
    view-distance: 6
  world_the_end:
    # 针对末地的特定配置
    view-distance: 6
```

### 配置优先级

1. 特定世界的配置（如 `world_nether`）
2. `default` 配置
3. 服务器内置默认值

---

## verbose

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.verbose` |
| 类型 | 布尔值 |
| 默认值 | `false` |

控制是否在服务器启动时输出详细的世界配置信息。

- `true`：启动时输出每个世界的详细配置
- `false`：不输出详细配置信息

此选项主要用于调试配置问题，正常运行时建议保持关闭。

---

## view-distance

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.view-distance` |
| 类型 | 整数或 `default` |
| 默认值 | `default` |
| 范围 | 2-32 |

设置服务器发送给玩家的区块视距。

- `default`：使用 server.properties 中的 `view-distance` 值
- 数字：覆盖 server.properties 的设置

### 视距与性能

视距对服务器性能有显著影响：

| 视距 | 加载区块数 | 适用场景 |
|------|-----------|---------|
| 4 | 81 | 低配服务器 |
| 6 | 169 | 小型服务器 |
| 8 | 289 | 中型服务器 |
| 10 | 441 | 标准服务器 |
| 12 | 625 | 高配服务器 |

### 分世界配置示例

```yaml
world-settings:
  default:
    view-distance: 10
  world_nether:
    view-distance: 6  # 下界通常不需要太大视距
  world_the_end:
    view-distance: 8
```

---

## simulation-distance

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.simulation-distance` |
| 类型 | 整数或 `default` |
| 默认值 | `default` |
| 范围 | 2-32 |

设置实体和方块实体的模拟距离。

- `default`：使用 server.properties 中的 `simulation-distance` 值
- 数字：覆盖 server.properties 的设置

### 视距 vs 模拟距离

- **视距**：玩家能看到多远的区块
- **模拟距离**：实体和红石等在多远范围内会被处理

模拟距离通常应小于或等于视距。较小的模拟距离可以显著提升性能，同时玩家仍能看到远处的地形。

---

## 实体激活范围

实体激活范围决定了不同类型实体在距离玩家多远时会被"激活"（执行 AI 和移动逻辑）。

```yaml
world-settings:
  default:
    entity-activation-range:
      animals: 32
      monsters: 32
      raiders: 64
      misc: 16
      water: 16
      villagers: 32
      flying-monsters: 32
      villagers-work-immunity-after: 100
      villagers-work-immunity-for: 20
      villagers-active-for-panic: true
      tick-inactive-villagers: true
      wake-up-inactive:
        animals-max-per-tick: 4
        animals-every: 1200
        animals-for: 100
        monsters-max-per-tick: 8
        monsters-every: 400
        monsters-for: 100
        villagers-max-per-tick: 4
        villagers-every: 600
        villagers-for: 100
        flying-monsters-max-per-tick: 8
        flying-monsters-every: 200
        flying-monsters-for: 100
```

---

## entity-activation-range.animals

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.entity-activation-range.animals` |
| 类型 | 整数 |
| 默认值 | `32` |
| 单位 | 方块 |

设置动物（牛、羊、猪等）的激活范围。

超出此范围的动物将不会执行 AI 逻辑，从而节省服务器资源。

### 影响的实体

- 牛、羊、猪、鸡
- 马、驴、骡
- 狼、猫、狐狸
- 其他被动生物

---

## entity-activation-range.monsters

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.entity-activation-range.monsters` |
| 类型 | 整数 |
| 默认值 | `32` |
| 单位 | 方块 |

设置怪物的激活范围。

### 影响的实体

- 僵尸、骷髅、蜘蛛
- 苦力怕、末影人
- 女巫、恶魂
- 其他敌对生物

### 注意事项

降低此值可以提升性能，但可能影响游戏体验：
- 怪物可能在玩家接近时才开始移动
- 远处的怪物不会主动追击玩家

---

## entity-activation-range.raiders

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.entity-activation-range.raiders` |
| 类型 | 整数 |
| 默认值 | `64` |
| 单位 | 方块 |

设置袭击者（掠夺者）的激活范围。

袭击者包括：
- 掠夺者
- 卫道士
- 唤魔者
- 劫掠兽

由于袭击事件的特殊性，袭击者通常需要更大的激活范围以确保袭击正常进行。

---

## entity-activation-range.misc

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.entity-activation-range.misc` |
| 类型 | 整数 |
| 默认值 | `16` |
| 单位 | 方块 |

设置杂项实体的激活范围。

杂项实体包括：
- 物品实体
- 经验球
- 箭矢
- 烟花火箭
- 其他非生物实体

---

## entity-activation-range.water

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.entity-activation-range.water` |
| 类型 | 整数 |
| 默认值 | `16` |
| 单位 | 方块 |

设置水生生物的激活范围。

水生生物包括：
- 鱼类（鳕鱼、鲑鱼、热带鱼、河豚）
- 鱿鱼、发光鱿鱼
- 海豚
- 海龟
- 溺尸（部分情况）

---

## entity-activation-range.villagers

| 属性 | 值 |
|------|-----|
| 键名 | `world-settings.default.entity-activation-range.villagers` |
| 类型 | 整数 |
| 默认值 | `32` |
| 单位 | 方块 |

设置村民的激活范围。

村民的 AI 相对复杂，包括：
- 寻路到工作站
- 与其他村民交流
- 睡觉和起床
- 交易界面响应

适当的激活范围可以平衡村民功能和服务器性能。
