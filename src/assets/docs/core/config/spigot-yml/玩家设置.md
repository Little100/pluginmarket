# spigot.yml 配置详解 - 玩家设置

本文档介绍 spigot.yml 中与玩家相关的配置选项，包括移动检测、日志记录等设置。

## 玩家移动检测

Spigot 提供了玩家移动检测机制，用于防止玩家使用作弊客户端进行非法移动（如飞行、瞬移等）。

```yaml
settings:
  moved-wrongly-threshold: 0.0625
  moved-too-quickly-multiplier: 10.0
```

---

## moved-wrongly-threshold

| 属性 | 值 |
|------|-----|
| 键名 | `settings.moved-wrongly-threshold` |
| 类型 | 小数 |
| 默认值 | `0.0625` |

设置玩家"错误移动"的检测阈值。

当服务器检测到玩家的实际位置与预期位置偏差超过此阈值时，会将玩家拉回正确位置。这是防止玩家穿墙、卡进方块等异常移动的机制。

### 工作原理

服务器会预测玩家的下一个位置，如果玩家报告的位置与预测位置相差超过阈值，服务器会认为这是一次"错误移动"并进行修正。

### 调整建议

| 情况 | 建议操作 |
|------|---------|
| 玩家经常被拉回（网络延迟高） | 适当增大阈值 |
| 需要更严格的反作弊 | 适当减小阈值 |
| 使用了反作弊插件 | 保持默认或按插件建议调整 |

**注意**：此值设置过小可能导致正常玩家频繁被拉回，影响游戏体验；设置过大则可能让作弊玩家有可乘之机。

---

## moved-too-quickly-multiplier

| 属性 | 值 |
|------|-----|
| 键名 | `settings.moved-too-quickly-multiplier` |
| 类型 | 小数 |
| 默认值 | `10.0` |

设置玩家"移动过快"的检测倍率。

当玩家的移动速度超过正常速度的指定倍数时，服务器会认为玩家移动过快并进行处理。这是防止玩家使用速度作弊的机制。

### 计算方式

服务器会根据玩家当前的移动能力（包括药水效果、装备等）计算出最大允许速度，然后乘以此倍率作为最终阈值。

### 调整建议

| 情况 | 建议操作 |
|------|---------|
| 玩家使用高速移动道具时被误判 | 适当增大倍率 |
| 需要更严格的速度检测 | 适当减小倍率 |
| 服务器有自定义移动机制 | 根据实际情况调整 |

---

## 日志记录设置

Spigot 提供了一些日志记录选项，帮助服务器管理员追踪特定事件。

```yaml
settings:
  log-villager-deaths: true
  log-named-deaths: true
```

---

## log-villager-deaths

| 属性 | 值 |
|------|-----|
| 键名 | `settings.log-villager-deaths` |
| 类型 | 布尔值 |
| 默认值 | `true` |

控制是否在控制台记录村民死亡信息。

- `true`：村民死亡时在控制台输出日志
- `false`：不记录村民死亡信息

### 日志示例

```
[Server] Villager (职业) died at (x, y, z) in world
```

### 使用场景

- 追踪村民被意外杀死的情况
- 调试村民相关的问题
- 监控服务器中村民的存活状态

如果你的服务器有大量村民，且不需要追踪它们的死亡，可以关闭此选项以减少日志输出。

---

## log-named-deaths

| 属性 | 值 |
|------|-----|
| 键名 | `settings.log-named-deaths` |
| 类型 | 布尔值 |
| 默认值 | `true` |

控制是否在控制台记录命名实体的死亡信息。

- `true`：命名实体（使用命名牌命名的生物）死亡时在控制台输出日志
- `false`：不记录命名实体死亡信息

### 日志示例

```
[Server] Named entity 'MyPet' died at (x, y, z) in world
```

### 使用场景

- 追踪玩家宠物的死亡
- 监控重要 NPC 的状态
- 调试实体相关的问题

命名实体通常是玩家花费精力命名的重要生物，记录它们的死亡可以帮助追踪问题或处理玩家投诉。

---

## 属性相关设置

```yaml
settings:
  attribute:
    maxHealth:
      max: 2048.0
    movementSpeed:
      max: 2048.0
    attackDamage:
      max: 2048.0
```

---

## attribute.maxHealth.max

| 属性 | 值 |
|------|-----|
| 键名 | `settings.attribute.maxHealth.max` |
| 类型 | 小数 |
| 默认值 | `2048.0` |

设置实体最大生命值属性的上限。

此选项限制了通过命令或插件设置的最大生命值。默认值 2048 对于大多数服务器已经足够。

### 使用场景

- 自定义 Boss 需要超高生命值
- RPG 服务器需要更高的属性上限
- 限制插件设置过高的属性值

---

## attribute.movementSpeed.max

| 属性 | 值 |
|------|-----|
| 键名 | `settings.attribute.movementSpeed.max` |
| 类型 | 小数 |
| 默认值 | `2048.0` |

设置实体移动速度属性的上限。

此选项限制了通过命令或插件设置的最大移动速度。

**注意**：过高的移动速度可能导致区块加载问题或服务器性能下降。

---

## attribute.attackDamage.max

| 属性 | 值 |
|------|-----|
| 键名 | `settings.attribute.attackDamage.max` |
| 类型 | 小数 |
| 默认值 | `2048.0` |

设置实体攻击伤害属性的上限。

此选项限制了通过命令或插件设置的最大攻击伤害。

### 调整建议

对于 RPG 或自定义玩法服务器，可能需要根据游戏设计调整这些属性上限。但请注意，过高的属性值可能导致游戏平衡问题或技术问题。
