# 游戏规则

本节介绍 `server.properties` 中与游戏规则相关的配置项，包括游戏模式、难度、PVP、飞行等设置。

---

## gamemode

| 属性 | 值 |
|------|-----|
| 键名 | `gamemode` |
| 默认值 | `survival` |
| 可选值 | `survival` / `creative` / `adventure` / `spectator` |

新玩家加入服务器时的默认游戏模式。

| 模式 | 说明 |
|------|------|
| `survival` | 生存模式 - 需要收集资源、有生命值和饥饿值 |
| `creative` | 创造模式 - 无限资源、可飞行、无敌 |
| `adventure` | 冒险模式 - 不能破坏/放置方块（除非工具允许） |
| `spectator` | 旁观模式 - 可穿墙、不可交互 |

### 注意

此设置仅影响新玩家首次加入时的模式。已有玩家的模式不会被更改。管理员可以使用 `/gamemode` 命令更改玩家模式。

---

## force-gamemode

| 属性 | 值 |
|------|-----|
| 键名 | `force-gamemode` |
| 默认值 | `false` |
| 可选值 | `true` / `false` |

是否在玩家每次加入时强制设置为默认游戏模式。

- `true`：玩家每次加入都会被设置为 `gamemode` 指定的模式
- `false`：玩家保持上次退出时的游戏模式

### 使用场景

- **小游戏服务器**：设置为 `true`，确保玩家每次加入都是正确的模式
- **生存服务器**：保持 `false`，让玩家保持自己的模式

---

## difficulty

| 属性 | 值 |
|------|-----|
| 键名 | `difficulty` |
| 默认值 | `easy` |
| 可选值 | `peaceful` / `easy` / `normal` / `hard` |

服务器的游戏难度。

| 难度 | 说明 |
|------|------|
| `peaceful` | 和平 - 不生成敌对生物，生命值自动恢复 |
| `easy` | 简单 - 敌对生物伤害较低，饥饿不会致死 |
| `normal` | 普通 - 标准难度 |
| `hard` | 困难 - 敌对生物伤害高，饥饿可致死，僵尸可破门 |

---

## hardcore

| 属性 | 值 |
|------|-----|
| 键名 | `hardcore` |
| 默认值 | `false` |
| 可选值 | `true` / `false` |

是否启用极限模式。启用后：

- 难度锁定为困难
- 玩家死亡后变为旁观模式（无法复活）
- 世界会显示极限模式的红心图标

> ⚠️ 启用极限模式后，`difficulty` 设置会被忽略

---

## pvp

| 属性 | 值 |
|------|-----|
| 键名 | `pvp` |
| 默认值 | `true` |
| 可选值 | `true` / `false` |

是否允许玩家之间互相攻击（Player vs Player）。

- `true`：玩家可以互相造成伤害
- `false`：玩家之间的攻击无效

### 注意

即使禁用 PVP，玩家仍然可以通过以下方式间接伤害其他玩家：
- 点燃 TNT
- 使用岩浆/水
- 推入虚空
- 召唤生物

如需完全禁止玩家互相伤害，建议使用插件。

---

## allow-flight

| 属性 | 值 |
|------|-----|
| 键名 | `allow-flight` |
| 默认值 | `false` |
| 可选值 | `true` / `false` |

是否允许生存模式玩家飞行。

- `false`：检测到飞行的生存模式玩家会被踢出
- `true`：不检测飞行，允许使用飞行 mod 或插件

### 重要说明

- 创造模式玩家始终可以飞行，不受此设置影响
- 如果服务器安装了飞行插件（如 EssentialsX 的 /fly），必须设置为 `true`
- 设置为 `true` 不会自动给玩家飞行能力，只是不踢出飞行的玩家

---

## spawn-protection

| 属性 | 值 |
|------|-----|
| 键名 | `spawn-protection` |
| 默认值 | `16` |
| 可选值 | `0` 或正整数 |

出生点保护半径（方块数）。在此范围内，非 OP 玩家无法破坏或放置方块。

- 设置为 `0` 禁用出生点保护
- 保护区域是以世界出生点为中心的正方形

### 计算方式

保护区域边长 = `spawn-protection` × 2 + 1

例如：`spawn-protection=16` 时，保护区域为 33×33 方块。

---

## spawn-monsters

| 属性 | 值 |
|------|-----|
| 键名 | `spawn-monsters` |
| 默认值 | `true` |
| 可选值 | `true` / `false` |

是否生成敌对生物（怪物）。

- `true`：正常生成僵尸、骷髅、苦力怕等
- `false`：不生成任何敌对生物

> 注意：此设置不影响已存在的怪物，也不影响刷怪笼

---

## spawn-animals

| 属性 | 值 |
|------|-----|
| 键名 | `spawn-animals` |
| 默认值 | `true` |
| 可选值 | `true` / `false` |

是否生成友好生物（动物）。

- `true`：正常生成猪、牛、羊、鸡等
- `false`：不生成任何友好生物

---

## spawn-npcs

| 属性 | 值 |
|------|-----|
| 键名 | `spawn-npcs` |
| 默认值 | `true` |
| 可选值 | `true` / `false` |

是否生成村民（NPC）。

- `true`：正常生成村民
- `false`：不生成村民

---

## allow-nether

| 属性 | 值 |
|------|-----|
| 键名 | `allow-nether` |
| 默认值 | `true` |
| 可选值 | `true` / `false` |

是否允许进入下界。

- `true`：玩家可以通过下界传送门进入下界
- `false`：下界传送门不会工作

### 注意

禁用下界后，下界相关的游戏进度将无法完成。

---

## generate-structures

| 属性 | 值 |
|------|-----|
| 键名 | `generate-structures` |
| 默认值 | `true` |
| 可选值 | `true` / `false` |

是否在世界中生成结构（村庄、神殿、要塞等）。

- `true`：正常生成所有结构
- `false`：不生成任何结构

> ⚠️ 此设置仅影响新生成的区块，已生成的结构不会消失

---

## 游戏规则配置示例

### 标准生存服

```properties
gamemode=survival
force-gamemode=false
difficulty=normal
hardcore=false
pvp=true
allow-flight=false
spawn-protection=16
spawn-monsters=true
spawn-animals=true
spawn-npcs=true
allow-nether=true
generate-structures=true
```

### 和平建筑服

```properties
gamemode=creative
force-gamemode=true
difficulty=peaceful
hardcore=false
pvp=false
allow-flight=true
spawn-protection=0
spawn-monsters=false
spawn-animals=true
spawn-npcs=true
allow-nether=true
generate-structures=true
```

### 极限生存服

```properties
gamemode=survival
force-gamemode=false
difficulty=hard
hardcore=true
pvp=true
allow-flight=false
spawn-protection=0
spawn-monsters=true
spawn-animals=true
spawn-npcs=true
allow-nether=true
generate-structures=true
```
