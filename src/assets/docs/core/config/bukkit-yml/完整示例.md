# bukkit.yml 配置详解 - 完整示例

## 完整配置文件示例

以下是一个完整的 bukkit.yml 配置文件示例，包含所有配置项及其推荐值：

```yaml
# Bukkit 服务器配置文件
# 此文件控制 Bukkit 层面的服务器行为

settings:
  allow-end: true
  warn-on-overload: true
  permissions-file: permissions.yml
  update-folder: update
  plugin-profiling: false
  connection-throttle: 4000
  query-plugins: false
  deprecated-verbose: false
  shutdown-message: "服务器维护中，请稍后再来"
  minimum-api: none

spawn-limits:
  monsters: 70
  animals: 10
  water-animals: 5
  water-ambient: 20
  water-underground-creature: 5
  axolotls: 5
  ambient: 15

chunk-gc:
  period-in-ticks: 600

ticks-per:
  animal-spawns: 400
  monster-spawns: 1
  water-spawns: 1
  water-ambient-spawns: 1
  water-underground-creature-spawns: 1
  axolotl-spawns: 1
  ambient-spawns: 1
  autosave: 6000

aliases:
  icanhasbukkit:
    - version $1-

worlds: {}
```

---

## 场景化配置模板

### 小型生存服务器

适用于 10-30 人的小型生存服务器：

```yaml
settings:
  allow-end: true
  warn-on-overload: true
  permissions-file: permissions.yml
  update-folder: update
  plugin-profiling: false
  connection-throttle: 4000
  query-plugins: false
  deprecated-verbose: false
  shutdown-message: "服务器正在重启，请稍等片刻~"
  minimum-api: none

spawn-limits:
  monsters: 70
  animals: 10
  water-animals: 5
  water-ambient: 20
  water-underground-creature: 5
  axolotls: 5
  ambient: 15

chunk-gc:
  period-in-ticks: 600

ticks-per:
  animal-spawns: 400
  monster-spawns: 1
  water-spawns: 1
  water-ambient-spawns: 1
  water-underground-creature-spawns: 1
  axolotl-spawns: 1
  ambient-spawns: 1
  autosave: 6000

aliases:
  v:
    - version
  gm:
    - gamemode $1 $2-

worlds: {}
```

---

### 大型公共服务器

适用于 50+ 人的大型服务器，注重性能优化：

```yaml
settings:
  allow-end: true
  warn-on-overload: true
  permissions-file: permissions.yml
  update-folder: update
  plugin-profiling: false
  connection-throttle: 4000
  query-plugins: false
  deprecated-verbose: false
  shutdown-message: "&c服务器维护中\n&e预计 5 分钟后恢复"
  minimum-api: none

spawn-limits:
  monsters: 50
  animals: 8
  water-animals: 3
  water-ambient: 10
  water-underground-creature: 3
  axolotls: 3
  ambient: 1

chunk-gc:
  period-in-ticks: 400

ticks-per:
  animal-spawns: 400
  monster-spawns: 2
  water-spawns: 2
  water-ambient-spawns: 40
  water-underground-creature-spawns: 2
  axolotl-spawns: 2
  ambient-spawns: 40
  autosave: 12000

aliases:
  v:
    - version

worlds: {}
```

---

### 使用 BungeeCord/Velocity 代理

适用于群组服务器的子服：

```yaml
settings:
  allow-end: true
  warn-on-overload: true
  permissions-file: permissions.yml
  update-folder: update
  plugin-profiling: false
  connection-throttle: -1    # 重要：代理服务器必须设为 -1
  query-plugins: false
  deprecated-verbose: false
  shutdown-message: "正在切换服务器..."
  minimum-api: none

spawn-limits:
  monsters: 70
  animals: 10
  water-animals: 5
  water-ambient: 20
  water-underground-creature: 5
  axolotls: 5
  ambient: 15

chunk-gc:
  period-in-ticks: 600

ticks-per:
  animal-spawns: 400
  monster-spawns: 1
  water-spawns: 1
  water-ambient-spawns: 1
  water-underground-creature-spawns: 1
  axolotl-spawns: 1
  ambient-spawns: 1
  autosave: 6000

aliases: {}

worlds: {}
```

---

## 常见问题解答

### Q: 修改配置后不生效怎么办？

**A**: 大部分 bukkit.yml 的配置需要重启服务器才能生效。请确保：
1. 保存文件后完全关闭服务器
2. 重新启动服务器
3. 检查控制台是否有配置错误提示

### Q: 配置文件格式错误导致服务器无法启动？

**A**: YAML 格式对缩进和语法要求严格。常见错误包括：
1. 使用了 Tab 键而不是空格
2. 冒号后缺少空格
3. 字符串包含特殊字符但未加引号

可以使用在线 YAML 验证工具检查语法：
- [YAML Lint](http://www.yamllint.com/)
- [YAML Validator](https://codebeautify.org/yaml-validator)

### Q: spawn-limits 设为 0 后生物还是会生成？

**A**: 可能的原因：
1. 已存在的生物不会被移除，只是不再生成新的
2. 某些插件可能会绕过原版生成限制
3. 刷怪笼生成的生物不受此限制

### Q: 使用 Paper 服务端时这些配置还有效吗？

**A**: 大部分配置仍然有效，但 Paper 有自己的配置文件（paper.yml、paper-world.yml 等）可能会覆盖或扩展某些设置。建议同时参考 Paper 的配置文档。

### Q: connection-throttle 应该设置多少？

**A**: 
- 普通服务器：保持默认值 `4000`（4秒）
- 使用 BungeeCord/Velocity：必须设为 `-1`
- 频繁出现误踢：可以降低到 `2000`

### Q: 如何完全禁用某种生物的生成？

**A**: 将对应的 spawn-limits 值设为 `0`。例如禁用蝙蝠：
```yaml
spawn-limits:
  ambient: 0
```

### Q: autosave 设置多少合适？

**A**: 取决于你的需求：
- 数据安全优先：`3000`（2.5分钟）
- 平衡性能和安全：`6000`（5分钟，默认）
- 性能优先：`12000`（10分钟）

### Q: 如何查看当前的生物数量？

**A**: 可以使用以下方法：
1. 安装 Spark 插件，使用 `/spark health` 查看
2. 使用 `/minecraft:debug` 命令（需要 OP 权限）
3. 安装专门的实体统计插件

---

## 相关资源

- [Bukkit 官方文档](https://bukkit.fandom.com/wiki/Bukkit.yml)
- [SpigotMC 配置指南](https://www.spigotmc.org/wiki/spigot-configuration/)
- [Paper 配置文档](https://docs.papermc.io/paper/reference/configuration)
